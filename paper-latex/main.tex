%%%%%%%% ICML 2015 EXAMPLE LATEX SUBMISSION FILE %%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{article}

\usepackage{times}
\usepackage{graphicx}
\usepackage{subfigure} 

% For citations
\usepackage{natbib}

% For algorithms
%\usepackage{algorithm}
%\usepackage{algorithmic}
% Packages hyperref and algorithmic misbehave sometimes.  We can fix
% this with the following command.
%\newcommand{\theHalgorithm}{\arabic{algorithm}}

\usepackage{hyperref}
\usepackage{amsmath}
\usepackage{amssymb}

\def \N {\mathbb{N}}
\def \Nbr {\mathcal{N}}
\def \Q {\mathbb{Q}}
\def \F {\mathbb{F}}
\def \then {\implies &}
\def \oif {\Longleftrightarrow &\,}
\def \given {\text{Given }&}
\def \assume {\text{Assume }&}
\def \thfr {\therefore &\enskip}
\def \bij {\leftrightarrow}
\def \inj {\rightarrowtail}
\def \sur {\twoheadedrightarrow}
\def \R {\mathbb{R}}
\def \C {\mathbb{C}}
\def \D {\mathbb{D}}
\def \iff {\Longleftrightarrow}
\def \kron {\boldsymbol\delta}
\def \id {\text{id}}

\def\Tx{\textbf{x}}
\def\Ty{\textbf{y}}
\def\quotient{\mathclose{}/\mathopen{}}
\def\Tf{\textbf{f}}
\def\Th{\textbf{h}}
\def\Tg{\textbf{g}}
\def\sumn{\sum_{n=0}^\infty}
\def\limn{\lim_{n\rightarrow\infty}}
\def\prodn{\prod_{n=0}^\infty}
\DeclareMathOperator\adj{adj}

\newcommand{\stc}[1]{\widetilde{#1}}   
\newcommand{\pa}[1]{ \left({#1}\right) }
\newcommand{\set}[2]{ \left\{ #1 \,\middle|\, #2 \right\} }
\newcommand{\shift}[1]{&\quad & \text{#1}\\}
\newcommand{\lem}[1]{\text{\textbf{L.\ref{#1}}}}
\newcommand{\card}[1]{\left\vert{#1}\right\vert}
\newcommand{\Ps}[1]{\mathcal{P}\left({ #1 }\right)}
\newcommand{\colv}[1]{\begin{pmatrix} #1 \end{pmatrix}}
\newcommand{\mat}[1]{\begin{pmatrix} #1 \end{pmatrix}}
\newcommand{\detmat}[1]{\begin{vmatrix} #1 \end{vmatrix}}
\newcommand{\spanb}[1]{\text{span}\{ #1 \}}
\newcommand{\abs}[1]{\left|#1\right|}
\newcommand{\Inner}[1]{\langle #1 \rangle}
\newcommand{\Innercpy}[1]{\langle #1, #1 \rangle}
\newcommand{\conj}[1]{{\overline{#1}}}

\DeclareMathOperator{\Tr}{tr}
\DeclareMathOperator{\Dim}{dim}
\DeclareMathOperator{\Rank}{rank}
\DeclareMathOperator{\Ker}{ker}
\DeclareMathOperator{\Diam}{diam}
\DeclareMathOperator{\Diag}{diag}
\DeclareMathOperator{\Int}{int}
\DeclareMathOperator{\Clo}{clo}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\MyRe}{Re}
\DeclareMathOperator{\MyIm}{Im}
\DeclareMathOperator{\res}{res}

% Employ the following version of the ``usepackage'' statement for
% submitting the draft version of the paper for review.  This will set
% the note in the first column to ``Under review.  Do not distribute.''
%\usepackage{icml2015} 

% Employ this version of the ``usepackage'' statement after the paper has
% been accepted, when creating the final version.  This will set the
% note in the first column to ``Proceedings of the...''
\usepackage{icml2015}


% The \icmltitle you define below is probably too long as a header.
% Therefore, a short form for the running title is supplied here:
\icmltitlerunning{Commodities Forecasting with GDELT}

\begin{document}
\twocolumn[
\icmltitle{Commodities Forecasting from Non-Financial World News from GDELT}

% It is OKAY to include author information, even for blind
% submissions: the style file will automatically remove it for you
% unless you've provided the [accepted] option to the icml2015
% package.
\icmlauthor{Vladimir Feinberg}{vyf@princeton.edu}
\icmladdress{Princeton University}
\icmlauthor{Ghassen Jerfel}{gjerfel@princeton.edu}
\icmladdress{Princeton University}
\icmlauthor{Daway Chou-Ren}{dchouren@princeton.edu}
\icmladdress{Princeton University}
\icmlauthor{Zi Xiang Pan}{zpan@princeton.edu}
\icmladdress{Princeton University}
\icmlauthor{Tom Wu}{tongbinw@princeton.edu}
\icmladdress{Princeton University}

% You may provide any keywords that you 
% find helpful for describing your paper; these are used to populate 
% the "keywords" metadata in the PDF but will not be shown in the document
\icmlkeywords{GDELT, commodities, finance, forecasting, clustering, machine learning, ICML}

\vskip 0.3in
]

\begin{abstract} 

We propose a new method for predicting commodity price data through the use of aggregated daily non-macroeconomic news. Our method creates a static clustering to extract topics and weights each day's news events with an extracted importance metric. We use the GDELT news database to extract raw news attributes and sentiment evaluations of the articles. With a $K$-means model for clustering news data feeding into an a lasso regression model as a prediction for the log returns on commodity price will for the next day, [TODO(Ghassen) l1 model accuracy]. When using a Kelly criterion based trading strategy, with training on 563 days and testing on 221, we made 0.7\% returns.
\end{abstract} 

%TODO review below
% Submissions must be in PDF.
% The maximum paper length is \textbf{8 pages excluding references, and 10 pages including references} (pages 9 and 10 must contain only references).
% Do \textbf{not include author information or acknowledgments} in your initial submission. 
% Your paper should be in \textbf{10 point Times font}.
% Make sure your PDF file only uses Type-1 fonts.
% Place figure captions {\em under} the figure (and omit titles from inside the graphic file itself).  Place table captions {\em over} the table.
% References must include page numbers whenever possible and be as complete as possible.  Place multiple citations in chronological order.  
% Do not alter the style template; in particular, do not compress the paper format by reducing the vertical spaces.

\section{Introduction}

TODO(Daway): Sections 1 - 3: cut down and incorporate edits from midterm grades (and relevant parts of section 4)

\input{introduction.tex}
 
\section{Motivating Analysis}

\input{motivating-analysis.tex}

\section{Related Work}

\input{related_work.tex}

\section{Methods}

\input{methods-and-evaluation.tex}

\section{Results}

\input{results.tex}

\section{Evaluation}

To evaluate our results in the context of financial predictions, we ran a trading strategy on our test data set, using the predictions of our linear model.

Given a risk-free rate for borrowing leverage, $r$, the Kelly Criterion states that for a security with mean returns $\mu$ and volatility $\sigma$, the optimal fractional investment in the security one should make is $\frac{\mu-r}{\sigma^2}$ \cite{davis2012fractional}. 
todo assumptions
Estimating volatility from the training set and using the predicted next-day returns to calculate the proportion of the commodity tested, silver, to buy, we were able to simulate our performance over the 221-day period:

\begin{figure}[ht]
\vskip 0.2in
\begin{center}
\centerline{\includegraphics[scale=0.3]{images/sparse-silver.png}}
\caption{Portfolio performance for $r=0$ over time on the test set. Note mistakes (when the net value of our assets, in purple, falls) typically occur from poorly predicting upswings. At the above rate, we make 0.7\% returns on the given investment. We choose an artificial starting investment of \$15 (allowing for partial stock purchases) to keep the scales the same. The black line is the no-risk play.}
\end{center}
\vskip -0.2in
\label{fig:preprocess}
\end{figure}

We don't use the S\&P as a metric for the risk-free rate over this time because it actually fell 1.2\% over the testing period. Using instead a generous estimate of the yearly U.S. Treasury bond yield for the year of the test set, at 0.5\% (but modified to be compounded daily to fit with the per-day trading strategy), we still have some improvement.

The risk free rate did not effect our returns and is only useful as a benchmark to compare our strategy. Over the entire test run, we are only ever confident enough to purchase (or short) an amount of stocks equal to 51.8\% of our current net value, so no leverage is ever used.

Because our model beats all reasonable risk-free rates, there is some (albeit small, financially speaking) predictive power offered by the model. The returns on our net worth fluctuate over the test period with a standard deviation of 0.740\%, and we ended up with 0.727\% gains at the end of the test period.

[Note for reviewers: we will add a model with GDELT information removed for model comparison].

\section{Future Work}

\input{future_work.tex}

\subsection{Software and Data}

All code used is available in an open-source repository.\footnote{\hyperref[https://github.com/vlad17/COS513-Finance]{\texttt{https://github.com/vlad17/COS513-Finance}}} GDELT provides free access to its database as well.\footnote{ \hyperref[http://data.gdeltproject.org/events/index.html]{\texttt{http://data.gdeltproject.org/events/index.html}}}

Commodities pricing data is retrieved using the \texttt{R} package \texttt{quantmod}\footnote{\hyperref[http://www.quantmod.com/]{\texttt{http://www.quantmod.com/}}}, which pulls historical prices using Yahoo.

TODO(Tom): Update our sources for quotes

% Acknowledgements should only appear in the accepted version. 
% \section*{Acknowledgments} 

% In the unusual situation where you want a paper to appear in the
% references without citing it in the main text, use \nocite
% \nocite{langley00}

\bibliography{biblio}
\bibliographystyle{icml2015}


\end{document}
